{"version":3,"sources":["Structures/Client.js"],"names":["CommandoClient","require","Intents","WebhookClient","FeedEmitter","TimerManager","Database","Turndown","BotList","consola","Redis","web","module","exports","[object Object]","super","commandPrefix","process","env","COMMAND_PREFIX","owner","OWNER_ID","intents","NON_PRIVILEGED","FLAGS","GUILDS","GUILD_PRESENCES","partials","this","db","MONGO_URL","useNewUrlParser","useUnifiedTopology","logger","create","level","rss","testWebhook","TEST_WEBHOOK_ID","TEST_WEBHOOK_TOKEN","redis","timers","converter","bl","token","DISCORD_TOKEN","addRSSListeners","login","url","refresh","eventName","ignoreFirst","forEach","feed","add"],"mappings":"AAAA,MAAMA,eAAEA,gBAAmBC,QAAQ,wBAC7BC,QAAEA,QAAOC,cAAEA,eAAkBF,QAAQ,eACrCG,YAAEA,aAAgBH,QAAQ,kBAC1BI,aAAeJ,QAAQ,mBACvBK,SAAEA,UAAaL,QAAQ,cACvBM,SAAWN,QAAQ,YACnBO,QAAUP,QAAQ,aAClBQ,QAAUR,QAAQ,WAClBS,MAAQT,QAAQ,WAChBU,IAAMV,QAAQ,UAEpBW,OAAOC,QAAU,cAAqBb,eACrCc,cACCC,MAAM,CACLC,cAAeC,QAAQC,IAAIC,eAC3BC,MAAOH,QAAQC,IAAIG,SACnBC,QAAS,CAACpB,QAAQqB,eAAgBrB,QAAQsB,MAAMC,OAAQvB,QAAQsB,MAAME,iBACtEC,SAAU,CAAC,aAGZC,KAAKC,GAAK,IAAIvB,SAASW,QAAQC,IAAIY,UAAW,SAAU,CACvDC,iBAAiB,EACjBC,oBAAoB,IAGrBJ,KAAKK,OAASxB,QAAQyB,OAAO,CAC5BC,MAAO,IAGRP,KAAKQ,IAAM,IAAIhC,YAEfwB,KAAKS,YAAc,IAAIlC,cAAcc,QAAQC,IAAIoB,gBAAiBrB,QAAQC,IAAIqB,oBAE9EX,KAAKY,MAAQ,IAAI9B,MAAMkB,MAAMC,GAE7BD,KAAKa,OAAS,IAAIpC,aAAauB,MAE/BA,KAAKc,UAAY,IAAInC,SAErBqB,KAAKe,GAAK,IAAInC,QAAQoB,MAGvBd,YAAY8B,EAAQ3B,QAAQC,IAAI2B,eAI/B,OAHAjB,KAAKkB,kBACLnC,IAAIiB,MAEGb,MAAMgC,MAAMH,GAGpB9B,kBACe,CACb,CACCkC,IAAK,8DACLC,QAAS,IACTC,UAAW,QACXC,aAAa,IAITC,SAASC,GAASzB,KAAKQ,IAAIkB,IAAID","file":"Client.js","sourcesContent":["const { CommandoClient } = require('discord.js-commando');\nconst { Intents, WebhookClient } = require('discord.js');\nconst { FeedEmitter } = require('rss-emitter-ts');\nconst TimerManager = require('./TimerManager');\nconst { Database } = require('quickmongo');\nconst Turndown = require('turndown');\nconst BotList = require('./BotList');\nconst consola = require('consola');\nconst Redis = require('./Redis');\nconst web = require('../Web');\n\nmodule.exports = class Client extends CommandoClient {\n\tconstructor() {\n\t\tsuper({\n\t\t\tcommandPrefix: process.env.COMMAND_PREFIX,\n\t\t\towner: process.env.OWNER_ID,\n\t\t\tintents: [Intents.NON_PRIVILEGED, Intents.FLAGS.GUILDS, Intents.FLAGS.GUILD_PRESENCES],\n\t\t\tpartials: ['CHANNEL'],\n\t\t});\n\n\t\tthis.db = new Database(process.env.MONGO_URL, 'tanaka', {\n\t\t\tuseNewUrlParser: true,\n\t\t\tuseUnifiedTopology: true,\n\t\t});\n\n\t\tthis.logger = consola.create({\n\t\t\tlevel: 5,\n\t\t});\n\n\t\tthis.rss = new FeedEmitter();\n\n\t\tthis.testWebhook = new WebhookClient(process.env.TEST_WEBHOOK_ID, process.env.TEST_WEBHOOK_TOKEN);\n\n\t\tthis.redis = new Redis(this).db;\n\n\t\tthis.timers = new TimerManager(this);\n\n\t\tthis.converter = new Turndown();\n\n\t\tthis.bl = new BotList(this);\n\t}\n\n\tasync login(token = process.env.DISCORD_TOKEN) {\n\t\tthis.addRSSListeners();\n\t\tweb(this);\n\n\t\treturn super.login(token);\n\t}\n\n\taddRSSListeners() {\n\t\tconst feeds = [\n\t\t\t{\n\t\t\t\turl: 'https://www.animenewsnetwork.com/all/rss.xml?ann-edition=us',\n\t\t\t\trefresh: 20000,\n\t\t\t\teventName: 'anime',\n\t\t\t\tignoreFirst: true,\n\t\t\t},\n\t\t];\n\n\t\tfeeds.forEach((feed) => this.rss.add(feed));\n\t}\n};\n"]}