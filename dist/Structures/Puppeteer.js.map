{"version":3,"sources":["Structures/Puppeteer.js"],"names":["AdblockPlugin","require","default","StealthPlugin","puppeteer","use","blockTrackers","screenshot","async","url","headers","accept-language","accept-encoding","accept","browser","launch","headless","args","page","newPage","setViewport","width","height","setExtraHTTPHeaders","goto","waitUntil","waitForTimeout","buffer","data","title","close","e","Error","module","exports"],"mappings":"AAAA,MAAMA,cAAgBC,QAAQ,oCAAoCC,QAC5DC,cAAgBF,QAAQ,kCACxBG,UAAYH,QAAQ,mBAAmBC,QAE7CE,UAAUC,IAAIF,iBACdC,UAAUC,IAAIL,cAAc,CAAEM,eAAe,KAE7C,MAAMC,WAAaC,MAAOC,IACzB,IACC,MAAMC,EAAU,CACfC,kBAAmB,wDACnBC,kBAAmB,oBACnBC,OACC,uKAGIC,QAAgBV,UAAUW,OAAO,CACtCC,UAAU,EACVC,KAAM,CAAC,eAAgB,gBAAiB,mBAAoB,6BAEvDC,QAAaJ,EAAQK,gBAErBD,EAAKE,YAAY,CACtBC,MAAO,KACPC,OAAQ,aAEHJ,EAAKK,oBAAoBb,SACzBQ,EAAKM,KAAKf,EAAK,CAAEgB,UAAW,CAAC,OAAQ,4BACrCP,EAAKQ,eAAe,KAE1B,MAAMC,QAAeT,EAAKX,aACpBqB,EAAO,CACZC,YAAaX,EAAKW,QAClBF,OAAAA,GAKD,aAFMb,EAAQgB,QAEPF,EACN,MAAOG,GACR,MAAM,IAAIC,MAAMD,KAIlBE,OAAOC,QAAU,CAAE3B,WAAAA","file":"Puppeteer.js","sourcesContent":["const AdblockPlugin = require('puppeteer-extra-plugin-adblocker').default;\nconst StealthPlugin = require('puppeteer-extra-plugin-stealth');\nconst puppeteer = require('puppeteer-extra').default;\n\npuppeteer.use(StealthPlugin());\npuppeteer.use(AdblockPlugin({ blockTrackers: true }));\n\nconst screenshot = async (url) => {\n\ttry {\n\t\tconst headers = {\n\t\t\t'accept-language': 'ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7,de;q=0.6,it;q=0.5',\n\t\t\t'accept-encoding': 'gzip, deflate, br',\n\t\t\taccept:\n\t\t\t\t'text/html,application/xhtml+xml,application/json,text/plain,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n\t\t};\n\n\t\tconst browser = await puppeteer.launch({\n\t\t\theadless: true,\n\t\t\targs: ['--no-sandbox', '--disable-gpu', '--single-process', '--disable-dev-shm-usage'],\n\t\t});\n\t\tconst page = await browser.newPage();\n\n\t\tawait page.setViewport({\n\t\t\twidth: 1920,\n\t\t\theight: 1080,\n\t\t});\n\t\tawait page.setExtraHTTPHeaders(headers);\n\t\tawait page.goto(url, { waitUntil: ['load', 'domcontentloaded'] });\n\t\tawait page.waitForTimeout(5000);\n\n\t\tconst buffer = await page.screenshot();\n\t\tconst data = {\n\t\t\ttitle: await page.title(),\n\t\t\tbuffer,\n\t\t};\n\n\t\tawait browser.close();\n\n\t\treturn data;\n\t} catch (e) {\n\t\tthrow new Error(e);\n\t}\n};\n\nmodule.exports = { screenshot };\n"]}