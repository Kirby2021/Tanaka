const{shorten:shorten}=require("../../Structures/Util"),{Command:Command}=require("discord.js-commando"),{stripIndents:stripIndents}=require("common-tags"),{MessageEmbed:MessageEmbed}=require("discord.js"),request=require("node-superfetch");module.exports=class extends Command{constructor(e){super(e,{name:"source",aliases:["src"],memberName:"source",group:"info",description:"Gets the source code of the command.",guarded:!0,args:[{key:"command",prompt:"What is the command?",type:"command"}]})}async run(e,{command:s}){if(s.nsfw&&!e.guild&&!e.channel.nsfw)return e.say("That command is marked NSFW. You must use this command in an NSFW Channel if you want to see the source");const{body:t}=await request.get(`https://api.github.com/repos/1chiSensei/Tanaka/contents/src/Commands/${s.groupID}/${s.name}.js`).query("ref","main").set("Accept","application/vnd.github.v3+json"),n=(new MessageEmbed).setTitle(t.name).setURL(t.html_url).setDescription(stripIndents`
				\`\`\`js
				${shorten(Buffer.from(t.content,"base64").toString("utf-8"),1950)}
				\`\`\`
			`).setColor("RANDOM").setFooter(`Requested by ${e.author.tag}`,e.author.displayAvatarURL({dynamic:!0})).setTimestamp();return e.embed(n)}};
//# sourceMappingURL=source.js.map
