{"version":3,"sources":["Commands/search/ocr.js"],"names":["Command","require","MessageEmbed","request","module","exports","[object Object]","client","super","name","aliases","group","memberName","description","clientPermissions","args","key","prompt","type","throttling","usages","duration","msg","image","body","post","set","apiKey","process","env","OCR_KEY","attach","url","data","ParsedResults","ParsedText","length","say","embed","setImage","setColor","setDescription","setFooter","author","tag","displayAvatarURL","dynamic","setTimestamp","err","reply","message"],"mappings":"AAAA,MAAMA,QAAEA,SAAYC,QAAQ,wBACtBC,aAAEA,cAAiBD,QAAQ,cAC3BE,QAAUF,QAAQ,mBAExBG,OAAOC,QAAU,cAAyBL,QACzCM,YAAYC,GACXC,MAAMD,EAAQ,CACbE,KAAM,MACNC,QAAS,CAAC,iCACVC,MAAO,SACPC,WAAY,MACZC,YAAa,8BACbC,kBAAmB,CAAC,eACpBC,KAAM,CACL,CACCC,IAAK,QACLC,OAAQ,uCACRC,KAAM,UAGRC,WAAY,CACXC,OAAQ,EACRC,SAAU,MAKbf,UAAUgB,GAAKC,MAAEA,IAChB,IACC,MAAMC,KAAEA,SAAerB,QACrBsB,KAAK,qCACLC,IAAI,CAAEC,OAAQC,QAAQC,IAAIC,UAC1BC,OAAO,CAAEC,IAAKT,IACVU,EAAOT,EAAKU,cAAc,GAAGC,WAEnC,GAAoB,IAAhBF,EAAKG,OAAc,OAAOd,EAAIe,IAAI,2BAEtC,MAAMC,GAAQ,IAAIpC,cAChBqC,SAAShB,GACTiB,SAAS,UACTC,eAAeR,GACfS,UACA,gBAAgBpB,EAAIqB,OAAOC,MAC3BtB,EAAIqB,OAAOE,iBAAiB,CAAEC,SAAS,KAEvCC,eAEF,OAAOzB,EAAIgB,MAAMA,GAChB,MAAOU,GACR,OAAO1B,EAAI2B,MAAM,uBAAuBD,EAAIE","file":"ocr.js","sourcesContent":["const { Command } = require('discord.js-commando');\nconst { MessageEmbed } = require('discord.js');\nconst request = require('node-superfetch');\n\nmodule.exports = class OCRCommand extends Command {\n\tconstructor(client) {\n\t\tsuper(client, {\n\t\t\tname: 'ocr',\n\t\t\taliases: ['optical-character-recognition'],\n\t\t\tgroup: 'search',\n\t\t\tmemberName: 'ocr',\n\t\t\tdescription: 'Lists the text in an image.',\n\t\t\tclientPermissions: ['EMBED_LINKS'],\n\t\t\targs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'image',\n\t\t\t\t\tprompt: 'What image would you like to search?',\n\t\t\t\t\ttype: 'image',\n\t\t\t\t},\n\t\t\t],\n\t\t\tthrottling: {\n\t\t\t\tusages: 2,\n\t\t\t\tduration: 60,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync run(msg, { image }) {\n\t\ttry {\n\t\t\tconst { body } = await request\n\t\t\t\t.post('https://api.ocr.space/parse/image')\n\t\t\t\t.set({ apiKey: process.env.OCR_KEY })\n\t\t\t\t.attach({ url: image });\n\t\t\tconst data = body.ParsedResults[0].ParsedText;\n\n\t\t\tif (data.length === 0) return msg.say(\"Couldn't find any text.\");\n\n\t\t\tconst embed = new MessageEmbed()\n\t\t\t\t.setImage(image)\n\t\t\t\t.setColor('RANDOM')\n\t\t\t\t.setDescription(data)\n\t\t\t\t.setFooter(\n\t\t\t\t\t`Requested by ${msg.author.tag}`,\n\t\t\t\t\tmsg.author.displayAvatarURL({ dynamic: true }),\n\t\t\t\t)\n\t\t\t\t.setTimestamp();\n\n\t\t\treturn msg.embed(embed);\n\t\t} catch (err) {\n\t\t\treturn msg.reply(`An error occured: \\`${err.message}\\`.`);\n\t\t}\n\t}\n};\n"]}