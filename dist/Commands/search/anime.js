const{Command:Command}=require("discord.js-commando"),{MessageEmbed:MessageEmbed}=require("discord.js"),mal=require("mal-scraper");module.exports=class extends Command{constructor(e){super(e,{name:"anime",aliases:["anime-search"],group:"search",memberName:"anime",description:"Searches MyAnimeList for the anime that you give.",clientPermissions:["EMBED_LINKS"],args:[{key:"anime",prompt:"What is your query?",type:"string"}],throttling:{usages:5,duration:15}})}async run(e,{anime:i}){const n=await e.embed({description:"Fetching...."});try{const a=await mal.getInfoFromName(i);if("Rx - Hentai"===a.rating&&!e.channel.nsfw&&e.guild)return e.say("The anime you're searching for is marked NSFW. Please try again in a NSFW Channel.");const s=(new MessageEmbed).setAuthor("MyAnimeList","https://upload.wikimedia.org/wikipedia/commons/7/7a/MyAnimeList_Logo.png","https://myanimelist.net").setTitle(a.title).setDescription(a.synopsis||"No Synopsis").setThumbnail(a.picture||"").addField("❯ Trailer",a.trailer||"No Trailer",!0).addField("❯ English Title",a.englishTitle||"None",!0).addField("❯ Type",a.type,!0).addField("❯ Episodes",a.episodes||"0",!0).addField("❯ Status",a.status||"Unknown",!0).addField("❯ Aired",a.aired||"Unknown",!0).addField("❯ Premiered",a.premiered||"Unknown",!0).addField("❯ Source",a.source||"Unknown",!0).addField("❯ Duration",a.duration||"Unknown",!0).addField("❯ Rating",a.rating||"Unknown",!0).addField("❯ Rank",a.ranked||"Unknown",!0).addField("❯ Popularity",a.popularity||"Unknown",!0).setFooter(a.genres.join(", ")||"No Genres").setColor("#2e51a2").setURL(a.url).setTimestamp();return n.edit(s)}catch{return n.edit({embed:{description:"No results can be found."}})}}};
//# sourceMappingURL=anime.js.map
