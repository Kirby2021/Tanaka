{"version":3,"sources":["Commands/search/anime.js"],"names":["Command","require","MessageEmbed","mal","module","exports","[object Object]","client","super","name","aliases","group","memberName","description","clientPermissions","args","key","prompt","type","throttling","usages","duration","msg","anime","message","embed","result","getInfoFromName","rating","channel","nsfw","guild","say","setAuthor","setTitle","title","setDescription","synopsis","setThumbnail","picture","addField","trailer","englishTitle","episodes","status","aired","premiered","source","ranked","popularity","setFooter","genres","join","setColor","setURL","url","setTimestamp","edit"],"mappings":"AAAA,MAAMA,QAAEA,SAAYC,QAAQ,wBACtBC,aAAEA,cAAiBD,QAAQ,cAC3BE,IAAMF,QAAQ,eAEpBG,OAAOC,QAAU,cAA2BL,QAC3CM,YAAYC,GACXC,MAAMD,EAAQ,CACbE,KAAM,QACNC,QAAS,CAAC,gBACVC,MAAO,SACPC,WAAY,QACZC,YAAa,oDACbC,kBAAmB,CAAC,eACpBC,KAAM,CACL,CACCC,IAAK,QACLC,OAAQ,sBACRC,KAAM,WAGRC,WAAY,CACXC,OAAQ,EACRC,SAAU,MAKbf,UAAUgB,GAAKC,MAAEA,IAChB,MAAMC,QAAgBF,EAAIG,MAAM,CAAEZ,YAAa,iBAE/C,IACC,MAAMa,QAAevB,IAAIwB,gBAAgBJ,GAEzC,GAAsB,gBAAlBG,EAAOE,SAA6BN,EAAIO,QAAQC,MAAQR,EAAIS,MAC/D,OAAOT,EAAIU,IACV,sFAGF,MAAMP,GAAQ,IAAIvB,cAChB+B,UACA,cACA,2EACA,2BAEAC,SAASR,EAAOS,OAChBC,eAAeV,EAAOW,UAAY,eAClCC,aAAaZ,EAAOa,SAAW,IAC/BC,SAAS,YAAad,EAAOe,SAAW,cAAc,GACtDD,SAAS,kBAAmBd,EAAOgB,cAAgB,QAAQ,GAC3DF,SAAS,SAAUd,EAAOR,MAAM,GAChCsB,SAAS,aAAcd,EAAOiB,UAAY,KAAK,GAC/CH,SAAS,WAAYd,EAAOkB,QAAU,WAAW,GACjDJ,SAAS,UAAWd,EAAOmB,OAAS,WAAW,GAC/CL,SAAS,cAAed,EAAOoB,WAAa,WAAW,GACvDN,SAAS,WAAYd,EAAOqB,QAAU,WAAW,GACjDP,SAAS,aAAcd,EAAOL,UAAY,WAAW,GACrDmB,SAAS,WAAYd,EAAOE,QAAU,WAAW,GACjDY,SAAS,SAAUd,EAAOsB,QAAU,WAAW,GAC/CR,SAAS,eAAgBd,EAAOuB,YAAc,WAAW,GACzDC,UAAUxB,EAAOyB,OAAOC,KAAK,OAAS,aACtCC,SAAS,WACTC,OAAO5B,EAAO6B,KACdC,eAEF,OAAOhC,EAAQiC,KAAKhC,GACnB,MACD,OAAOD,EAAQiC,KAAK,CAAEhC,MAAO,CAAEZ,YAAa","file":"anime.js","sourcesContent":["const { Command } = require('discord.js-commando');\nconst { MessageEmbed } = require('discord.js');\nconst mal = require('mal-scraper');\n\nmodule.exports = class AnimeCommand extends Command {\n\tconstructor(client) {\n\t\tsuper(client, {\n\t\t\tname: 'anime',\n\t\t\taliases: ['anime-search'],\n\t\t\tgroup: 'search',\n\t\t\tmemberName: 'anime',\n\t\t\tdescription: 'Searches MyAnimeList for the anime that you give.',\n\t\t\tclientPermissions: ['EMBED_LINKS'],\n\t\t\targs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'anime',\n\t\t\t\t\tprompt: 'What is your query?',\n\t\t\t\t\ttype: 'string',\n\t\t\t\t},\n\t\t\t],\n\t\t\tthrottling: {\n\t\t\t\tusages: 5,\n\t\t\t\tduration: 15,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync run(msg, { anime }) {\n\t\tconst message = await msg.embed({ description: 'Fetching....' });\n\n\t\ttry {\n\t\t\tconst result = await mal.getInfoFromName(anime);\n\n\t\t\tif (result.rating === 'Rx - Hentai' && !msg.channel.nsfw && msg.guild)\n\t\t\t\treturn msg.say(\n\t\t\t\t\t\"The anime you're searching for is marked NSFW. Please try again in a NSFW Channel.\",\n\t\t\t\t);\n\n\t\t\tconst embed = new MessageEmbed()\n\t\t\t\t.setAuthor(\n\t\t\t\t\t'MyAnimeList',\n\t\t\t\t\t'https://upload.wikimedia.org/wikipedia/commons/7/7a/MyAnimeList_Logo.png',\n\t\t\t\t\t'https://myanimelist.net',\n\t\t\t\t)\n\t\t\t\t.setTitle(result.title)\n\t\t\t\t.setDescription(result.synopsis || 'No Synopsis')\n\t\t\t\t.setThumbnail(result.picture || '')\n\t\t\t\t.addField('❯ Trailer', result.trailer || 'No Trailer', true)\n\t\t\t\t.addField('❯ English Title', result.englishTitle || 'None', true)\n\t\t\t\t.addField('❯ Type', result.type, true)\n\t\t\t\t.addField('❯ Episodes', result.episodes || '0', true)\n\t\t\t\t.addField('❯ Status', result.status || 'Unknown', true)\n\t\t\t\t.addField('❯ Aired', result.aired || 'Unknown', true)\n\t\t\t\t.addField('❯ Premiered', result.premiered || 'Unknown', true)\n\t\t\t\t.addField('❯ Source', result.source || 'Unknown', true)\n\t\t\t\t.addField('❯ Duration', result.duration || 'Unknown', true)\n\t\t\t\t.addField('❯ Rating', result.rating || 'Unknown', true)\n\t\t\t\t.addField('❯ Rank', result.ranked || 'Unknown', true)\n\t\t\t\t.addField('❯ Popularity', result.popularity || 'Unknown', true)\n\t\t\t\t.setFooter(result.genres.join(', ') || 'No Genres')\n\t\t\t\t.setColor('#2e51a2')\n\t\t\t\t.setURL(result.url)\n\t\t\t\t.setTimestamp();\n\n\t\t\treturn message.edit(embed);\n\t\t} catch {\n\t\t\treturn message.edit({ embed: { description: 'No results can be found.' } });\n\t\t}\n\t}\n};\n"]}