const{formatNumber:formatNumber,embedURL:embedURL}=require("../../Structures/Util"),{Command:Command}=require("discord.js-commando"),{MessageEmbed:MessageEmbed}=require("discord.js"),request=require("node-superfetch"),moment=require("moment");module.exports=class extends Command{constructor(e){super(e,{name:"stack-overflow",aliases:["stackoverflow"],group:"search",memberName:"stack-overflow",description:"Searches Stack Overflow for your query.",clientPermissions:["EMBED_LINKS"],args:[{key:"query",prompt:"What question would you like to search for?",type:"string"}]})}async run(e,{query:r}){try{const{body:t}=await request.get("https://api.stackexchange.com/2.2/search/advanced").query({page:1,pagesize:1,order:"asc",sort:"relevance",answers:1,q:r,site:"stackoverflow",key:process.env.STACKOVERFLOW_KEY});if(!t.items.length)return e.say("Couldn't find any results.");const s=t.items[0],o=(new MessageEmbed).setColor("#f18025").setAuthor("Stack Overflow","https://i.imgur.com/pRSu2vj.png","https://stackoverflow.com").setURL(s.link).setTitle(s.title).addField("❯ ID",s.question_id,!0).addField("❯ Asker",embedURL(s.owner.display_name,s.owner.link),!0).addField("❯ Views",formatNumber(s.view_count),!0).addField("❯ Score",formatNumber(s.score),!0).addField("❯ Creation Date",moment.utc(1e3*s.creation_date).format("MM/DD/YYYY h:mm A"),!0).addField("❯ Last Activity",moment.utc(1e3*s.last_activity_date).format("MM/DD/YYYY h:mm A"),!0);return e.embed(o)}catch(r){return e.reply(`An error occured: \`${r.message}\`.`)}}};
//# sourceMappingURL=stack-overflow.js.map
