{"version":3,"sources":["Commands/search/headers.js"],"names":["isUrl","shorten","require","Command","MessageEmbed","request","module","exports","[object Object]","client","super","name","memberName","group","description","args","key","prompt","type","validate","site","msg","headers","get","headerArr","embed","setColor","setTimestamp","setFooter","author","tag","displayAvatarURL","dynamic","value","Object","entries","length","push","header","addField","replace","this","ip","err","status","say","reply","message"],"mappings":"AAAA,MAAMA,MAAEA,MAAKC,QAAEA,SAAYC,QAAQ,0BAC7BC,QAAEA,SAAYD,QAAQ,wBACtBE,aAAEA,cAAiBF,QAAQ,cAC3BG,QAAUH,QAAQ,mBAExBI,OAAOC,QAAU,cAA6BJ,QAC7CK,YAAYC,GACXC,MAAMD,EAAQ,CACbE,KAAM,UACNC,WAAY,UACZC,MAAO,SACPC,YAAa,iCACbC,KAAM,CACL,CACCC,IAAK,OACLC,OAAQ,kCACRC,KAAM,SACNC,SAAWC,GAASpB,MAAMoB,OAM9BZ,UAAUa,GAAKD,KAAEA,IAChB,IACC,MAAME,QAAEA,SAAkBjB,QAAQkB,IAAIH,GAChCI,EAAY,GACZC,GAAQ,IAAIrB,cAChBsB,SAAS,UACTC,eACAC,UACA,gBAAgBP,EAAIQ,OAAOC,MAC3BT,EAAIQ,OAAOE,iBAAiB,CAAEC,SAAS,KAGzC,IAAK,MAAOhB,EAAKiB,KAAUC,OAAOC,QAAQb,IACpCE,EAAUY,QAAU,IAEzBZ,EAAUa,KAAK,CAAErB,IAAAA,EAAKiB,MAAAA,IAEvB,IAAK,MAAMK,KAAUd,GACfA,EAAUY,QAAU,IAEzBX,EAAMc,SACLD,EAAOtB,IACiB,IAAxBsB,EAAOL,MAAMG,OACV,QACAnC,QACAqC,EAAOL,MAAMO,cACNC,KAAKhC,OAAOiC,KAClB,gBAED,MAKL,OAAOrB,EAAII,MAAMA,GAChB,MAAOkB,GACR,OAAmB,MAAfA,EAAIC,OAAuBvB,EAAIwB,IAAI,8BAEhCxB,EAAIyB,MAAM,uBAAuBH,EAAII","file":"headers.js","sourcesContent":["const { isUrl, shorten } = require('../../Structures/Util');\nconst { Command } = require('discord.js-commando');\nconst { MessageEmbed } = require('discord.js');\nconst request = require('node-superfetch');\n\nmodule.exports = class HeadersCommand extends Command {\n\tconstructor(client) {\n\t\tsuper(client, {\n\t\t\tname: 'headers',\n\t\t\tmemberName: 'headers',\n\t\t\tgroup: 'search',\n\t\t\tdescription: 'Gets the headers of a website.',\n\t\t\targs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'site',\n\t\t\t\t\tprompt: 'What is the url of the website?',\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tvalidate: (site) => isUrl(site),\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\tasync run(msg, { site }) {\n\t\ttry {\n\t\t\tconst { headers } = await request.get(site);\n\t\t\tconst headerArr = [];\n\t\t\tconst embed = new MessageEmbed()\n\t\t\t\t.setColor('RANDOM')\n\t\t\t\t.setTimestamp()\n\t\t\t\t.setFooter(\n\t\t\t\t\t`Requested by ${msg.author.tag}`,\n\t\t\t\t\tmsg.author.displayAvatarURL({ dynamic: true }),\n\t\t\t\t);\n\n\t\t\tfor (const [key, value] of Object.entries(headers)) {\n\t\t\t\tif (!headerArr.length >= 15) continue;\n\n\t\t\t\theaderArr.push({ key, value });\n\t\t\t}\n\t\t\tfor (const header of headerArr) {\n\t\t\t\tif (!headerArr.length >= 15) continue;\n\n\t\t\t\tembed.addField(\n\t\t\t\t\theader.key,\n\t\t\t\t\theader.value.length === 0\n\t\t\t\t\t\t? 'empty'\n\t\t\t\t\t\t: shorten(\n\t\t\t\t\t\t\t\theader.value.replace(\n\t\t\t\t\t\t\t\t\tawait this.client.ip(),\n\t\t\t\t\t\t\t\t\t'--REDACTED--',\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t1000,\n\t\t\t\t\t\t  ),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn msg.embed(embed);\n\t\t} catch (err) {\n\t\t\tif (err.status === 404) return msg.say(\"Couldn't find the website.\");\n\n\t\t\treturn msg.reply(`An error occured: \\`${err.message}\\`.`);\n\t\t}\n\t}\n};\n"]}