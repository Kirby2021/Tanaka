{"version":3,"sources":["Commands/search/stack-overflow.js"],"names":["formatNumber","embedURL","require","Command","MessageEmbed","request","moment","module","exports","[object Object]","client","super","name","aliases","group","memberName","description","clientPermissions","args","key","prompt","type","msg","query","body","get","page","pagesize","order","sort","answers","q","site","process","env","STACKOVERFLOW_KEY","items","length","say","data","embed","setColor","setAuthor","setURL","link","setTitle","title","addField","question_id","owner","display_name","view_count","score","utc","creation_date","format","last_activity_date","err","reply","message"],"mappings":"AAAA,MAAMA,aAAEA,aAAYC,SAAEA,UAAaC,QAAQ,0BACrCC,QAAEA,SAAYD,QAAQ,wBACtBE,aAAEA,cAAiBF,QAAQ,cAC3BG,QAAUH,QAAQ,mBAClBI,OAASJ,QAAQ,UAEvBK,OAAOC,QAAU,cAAmCL,QACnDM,YAAYC,GACXC,MAAMD,EAAQ,CACbE,KAAM,iBACNC,QAAS,CAAC,iBACVC,MAAO,SACPC,WAAY,iBACZC,YAAa,0CACbC,kBAAmB,CAAC,eACpBC,KAAM,CACL,CACCC,IAAK,QACLC,OAAQ,8CACRC,KAAM,aAMVZ,UAAUa,GAAKC,MAAEA,IAChB,IACC,MAAMC,KAAEA,SAAenB,QAAQoB,IAAI,qDAAqDF,MAAM,CAC7FG,KAAM,EACNC,SAAU,EACVC,MAAO,MACPC,KAAM,YACNC,QAAS,EACTC,EAAGR,EACHS,KAAM,gBACNb,IAAKc,QAAQC,IAAIC,oBAGlB,IAAKX,EAAKY,MAAMC,OAAQ,OAAOf,EAAIgB,IAAI,8BAEvC,MAAMC,EAAOf,EAAKY,MAAM,GAClBI,GAAQ,IAAIpC,cAChBqC,SAAS,WACTC,UACA,iBACA,kCACA,6BAEAC,OAAOJ,EAAKK,MACZC,SAASN,EAAKO,OACdC,SAAS,OAAQR,EAAKS,aAAa,GACnCD,SAAS,UAAW9C,SAASsC,EAAKU,MAAMC,aAAcX,EAAKU,MAAML,OAAO,GACxEG,SAAS,UAAW/C,aAAauC,EAAKY,aAAa,GACnDJ,SAAS,UAAW/C,aAAauC,EAAKa,QAAQ,GAC9CL,SACA,kBACAzC,OAAO+C,IAAyB,IAArBd,EAAKe,eAAsBC,OAAO,sBAC7C,GAEAR,SACA,kBACAzC,OAAO+C,IAA8B,IAA1Bd,EAAKiB,oBAA2BD,OAAO,sBAClD,GAGF,OAAOjC,EAAIkB,MAAMA,GAChB,MAAOiB,GACR,OAAOnC,EAAIoC,MAAM,uBAAuBD,EAAIE","file":"stack-overflow.js","sourcesContent":["const { formatNumber, embedURL } = require('../../Structures/Util');\nconst { Command } = require('discord.js-commando');\nconst { MessageEmbed } = require('discord.js');\nconst request = require('node-superfetch');\nconst moment = require('moment');\n\nmodule.exports = class StackOverflowCommand extends Command {\n\tconstructor(client) {\n\t\tsuper(client, {\n\t\t\tname: 'stack-overflow',\n\t\t\taliases: ['stackoverflow'],\n\t\t\tgroup: 'search',\n\t\t\tmemberName: 'stack-overflow',\n\t\t\tdescription: 'Searches Stack Overflow for your query.',\n\t\t\tclientPermissions: ['EMBED_LINKS'],\n\t\t\targs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'query',\n\t\t\t\t\tprompt: 'What question would you like to search for?',\n\t\t\t\t\ttype: 'string',\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\tasync run(msg, { query }) {\n\t\ttry {\n\t\t\tconst { body } = await request.get('https://api.stackexchange.com/2.2/search/advanced').query({\n\t\t\t\tpage: 1,\n\t\t\t\tpagesize: 1,\n\t\t\t\torder: 'asc',\n\t\t\t\tsort: 'relevance',\n\t\t\t\tanswers: 1,\n\t\t\t\tq: query,\n\t\t\t\tsite: 'stackoverflow',\n\t\t\t\tkey: process.env.STACKOVERFLOW_KEY,\n\t\t\t});\n\n\t\t\tif (!body.items.length) return msg.say(\"Couldn't find any results.\");\n\n\t\t\tconst data = body.items[0];\n\t\t\tconst embed = new MessageEmbed()\n\t\t\t\t.setColor('#f18025')\n\t\t\t\t.setAuthor(\n\t\t\t\t\t'Stack Overflow',\n\t\t\t\t\t'https://i.imgur.com/pRSu2vj.png',\n\t\t\t\t\t'https://stackoverflow.com',\n\t\t\t\t)\n\t\t\t\t.setURL(data.link)\n\t\t\t\t.setTitle(data.title)\n\t\t\t\t.addField('❯ ID', data.question_id, true)\n\t\t\t\t.addField('❯ Asker', embedURL(data.owner.display_name, data.owner.link), true)\n\t\t\t\t.addField('❯ Views', formatNumber(data.view_count), true)\n\t\t\t\t.addField('❯ Score', formatNumber(data.score), true)\n\t\t\t\t.addField(\n\t\t\t\t\t'❯ Creation Date',\n\t\t\t\t\tmoment.utc(data.creation_date * 1000).format('MM/DD/YYYY h:mm A'),\n\t\t\t\t\ttrue,\n\t\t\t\t)\n\t\t\t\t.addField(\n\t\t\t\t\t'❯ Last Activity',\n\t\t\t\t\tmoment.utc(data.last_activity_date * 1000).format('MM/DD/YYYY h:mm A'),\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\n\t\t\treturn msg.embed(embed);\n\t\t} catch (err) {\n\t\t\treturn msg.reply(`An error occured: \\`${err.message}\\`.`);\n\t\t}\n\t}\n};\n"]}