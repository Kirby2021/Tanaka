const{Command:Command}=require("discord.js-commando"),{MessageEmbed:MessageEmbed}=require("discord.js"),request=require("node-superfetch"),FormData=require("form-data");module.exports=class extends Command{constructor(e){super(e,{name:"ocr",aliases:["optical-character-recognition"],group:"search",memberName:"ocr",description:"Lists the text in an image.",clientPermissions:["EMBED_LINKS"],args:[{key:"image",prompt:"What image would you like to search?",type:"image"}],throttling:{usages:2,duration:60}})}async run(e,{image:r}){try{const s=(new FormData).append("url",r),{body:t}=await request.post("https://api.ocr.space/parse/image").set({apiKey:process.env.OCR_KEY}).send(s),a=t.ParsedResults[0].ParsedText;if(0===a.length)return e.say("Couldn't find any text.");const o=(new MessageEmbed).setImage(r).setColor("RANDOM").setDescription(a).setFooter(`Requested by ${e.author.tag}`,e.author.displayAvatarURL({dynamic:!0})).setTimestamp();return e.embed(o)}catch(r){return e.reply(`An error occured: \`${r.message}\`.`)}}};
//# sourceMappingURL=ocr.js.map
