const{isUrl:isUrl,shorten:shorten}=require("../../Structures/Util"),{Command:Command}=require("discord.js-commando"),{MessageEmbed:MessageEmbed}=require("discord.js"),request=require("node-superfetch");module.exports=class extends Command{constructor(e){super(e,{name:"headers",memberName:"headers",group:"search",description:"Gets the headers of a website.",args:[{key:"site",prompt:"What is the url of the website?",type:"string",validate:e=>isUrl(e)}]})}async run(e,{site:t}){try{const{headers:s}=await request.get(t),r=[],a=(new MessageEmbed).setColor("RANDOM").setTimestamp().setFooter(`Requested by ${e.author.tag}`,e.author.displayAvatarURL({dynamic:!0}));for(const[e,t]of Object.entries(s))!r.length>=15||r.push({key:e,value:t});for(const e of r)!r.length>=15||a.addField(e.key,0===e.value.length?"empty":shorten(e.value.replace(await this.client.ip(),"--REDACTED--"),1e3));return e.embed(a)}catch(t){return 404===t.status?e.say("Couldn't find the website."):e.reply(`An error occured: \`${t.message}\`.`)}}};
//# sourceMappingURL=headers.js.map
