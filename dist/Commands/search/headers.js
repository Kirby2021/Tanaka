const{isUrl:isUrl,shorten:shorten}=require("../../Structures/Util"),{Command:Command}=require("discord.js-commando"),{MessageEmbed:MessageEmbed}=require("discord.js"),request=require("node-superfetch");module.exports=class extends Command{constructor(e){super(e,{name:"headers",memberName:"headers",group:"search",description:"Gets the headers of a website.",args:[{key:"site",prompt:"What is the url of the website?",type:"string",validate:e=>isUrl(e)}]})}async run(e,{site:s}){try{const{headers:t}=await request.get(s),r=[],a=(new MessageEmbed).setColor("RANDOM").setTimestamp().setFooter(`Requested by ${e.author.tag}`,e.author.displayAvatarURL({dynamic:!0}));for(const[e,s]of Object.entries(t))!r.length>=15||r.push({key:e,value:s});for(const e of r)!r.length>=15||a.addField(e.key,0===e.value.length?"empty":shorten(e.value,1e3));return e.embed(a)}catch(s){return 404===s.status?e.say("Couldn't find the website."):e.reply(`An error occured: \`${s.message}\`.`)}}};
//# sourceMappingURL=headers.js.map
