{"version":3,"sources":["index.js"],"names":["MongoDBProvider","require","MongoClient","Client","path","client","setProvider","connect","db","url","useUnifiedTopology","useNewUrlParser","then","c","registry","registerDefaultTypes","registerGroups","id","name","guarded","registerDefaultGroups","registerDefaultCommands","unknownCommand","help","eval","ping","registerCommandsIn","join","__dirname","once","statuses","guilds","cache","reduce","a","b","memberCount","commands","size","status","Math","floor","random","length","setInterval","user","setActivity","type","logger","info","tag","on","debug","e","error","stack","rss","item","testWebhook","send","JSON","stringify","substring","login"],"mappings":"AAAA,MAAMA,gBAAEA,iBAAoBC,QAAQ,4BAC9BC,YAAEA,aAAgBD,QAAQ,WAC1BE,OAASF,QAAQ,uBACjBG,KAAOH,QAAQ,QAEfI,OAAS,IAAIF,OAEnBE,OAAOC,YACNJ,YAAYK,QAAQF,OAAOG,GAAGC,IAAK,CAClCC,oBAAoB,EACpBC,iBAAiB,IACfC,MAAMC,GAAM,IAAIb,gBAAgBa,EAAG,aAGvCR,OAAOS,SACLC,uBACAC,eAAe,CACf,CAAEC,GAAI,OAAQC,KAAM,UAAWC,SAAS,GACxC,CAAEF,GAAI,SAAUC,KAAM,mBACtB,CAAED,GAAI,OAAQC,KAAM,eACpB,CAAED,GAAI,SAAUC,KAAM,YAEtBE,wBACAC,wBAAwB,CACxBC,gBAAgB,EAChBC,MAAM,EACNC,MAAM,EACNC,MAAM,IAENC,mBAAmBtB,KAAKuB,KAAKC,UAAW,aAE1CvB,OAAOwB,KAAK,SAAS,KACpB,MAIMC,EAAW,CAAC,GAJAzB,OAAO0B,OAAOC,MAAMC,QAAO,CAACC,EAAGC,IAAMD,EAAIC,EAAEC,aAAa,WAIlC,GAHnB/B,OAAOS,SAASuB,SAASC,gBAGsB,GAFjDjC,OAAO0B,OAAOC,MAAMM,eAIjCC,EAAS,YAAYT,EAASU,KAAKC,MAAMD,KAAKE,SAAWZ,EAASa,WAExEtC,OAAOuC,aAAY,IAAMvC,OAAOwC,KAAKC,YAAYP,EAAQ,CAAEQ,KAAM,cAAe,KAEhF1C,OAAO2C,OAAOC,KAAK,gBAAgB5C,OAAOwC,KAAKK,WAGhD7C,OAAO8C,GAAG,QAAS9C,OAAO2C,OAAOI,OAEjC/C,OAAO8C,GAAG,SAAUE,GAAMhD,OAAO2C,OAAOM,MAAMD,EAAEE,SAEhDlD,OAAOG,GAAGqB,KAAK,SAAS,IAAMxB,OAAO2C,OAAOC,KAAK,uBAEjD5C,OAAOG,GAAG2C,GAAG,QAAS9C,OAAO2C,OAAOI,OAEpC/C,OAAOG,GAAG2C,GAAG,SAAUE,GAAMhD,OAAO2C,OAAOM,MAAMD,EAAEE,SAEnDlD,OAAOmD,IAAIL,GAAG,8BAA+BM,IAC5CpD,OAAOqD,YAAYC,KAClBC,KAAKC,UAAUJ,EAAM,KAAM,GAAGd,OAAS,IACpC,GAAGiB,KAAKC,UAAUJ,EAAM,KAAM,GAAGK,UAAU,EAAG,WAC9CF,KAAKC,UAAUJ,EAAM,KAAM,OAIhCpD,OAAOmD,IAAIL,GAAG,sBAAuBM,IACpCpD,OAAOqD,YAAYC,KAClBC,KAAKC,UAAUJ,EAAM,KAAM,GAAGd,OAAS,IACpC,GAAGiB,KAAKC,UAAUJ,EAAM,KAAM,GAAGK,UAAU,EAAG,WAC9CF,KAAKC,UAAUJ,EAAM,KAAM,OAIhCpD,OAAO0D","file":"index.js","sourcesContent":["const { MongoDBProvider } = require('commando-provider-mongo');\nconst { MongoClient } = require('mongodb');\nconst Client = require('./Structures/Client');\nconst path = require('path');\n\nconst client = new Client();\n\nclient.setProvider(\n\tMongoClient.connect(client.db.url, {\n\t\tuseUnifiedTopology: true,\n\t\tuseNewUrlParser: true,\n\t}).then((c) => new MongoDBProvider(c, 'tanaka')),\n);\n\nclient.registry\n\t.registerDefaultTypes()\n\t.registerGroups([\n\t\t{ id: 'util', name: 'Utility', guarded: true },\n\t\t{ id: 'random', name: 'Random Response' },\n\t\t{ id: 'info', name: 'Information' },\n\t\t{ id: 'search', name: 'Search' },\n\t])\n\t.registerDefaultGroups()\n\t.registerDefaultCommands({\n\t\tunknownCommand: false,\n\t\thelp: false,\n\t\teval: false,\n\t\tping: false,\n\t})\n\t.registerCommandsIn(path.join(__dirname, 'Commands'));\n\nclient.once('ready', () => {\n\tconst userCount = client.guilds.cache.reduce((a, b) => a + b.memberCount, 0);\n\tconst commandCount = client.registry.commands.size;\n\tconst guildCount = client.guilds.cache.size;\n\n\tconst statuses = [`${userCount} users`, `${commandCount} commands`, `${guildCount} guilds`];\n\n\tconst status = `t!help | ${statuses[Math.floor(Math.random() * statuses.length)]}`;\n\n\tclient.setInterval(() => client.user.setActivity(status, { type: 'WATCHING' }), 30000);\n\n\tclient.logger.info(`Logged in as ${client.user.tag}.`);\n});\n\nclient.on('debug', client.logger.debug);\n\nclient.on('error', (e) => client.logger.error(e.stack));\n\nclient.db.once('ready', () => client.logger.info('MongoDB is ready!'));\n\nclient.db.on('debug', client.logger.debug);\n\nclient.db.on('error', (e) => client.logger.error(e.stack));\n\nclient.rss.on('item:new:anime:crunchyroll', (item) => {\n\tclient.testWebhook.send(\n\t\tJSON.stringify(item, null, 2).length > 2000\n\t\t\t? `${JSON.stringify(item, null, 2).substring(0, 1997)}...`\n\t\t\t: JSON.stringify(item, null, 2),\n\t);\n});\n\nclient.rss.on('item:new:anime:mal', (item) => {\n\tclient.testWebhook.send(\n\t\tJSON.stringify(item, null, 2).length > 2000\n\t\t\t? `${JSON.stringify(item, null, 2).substring(0, 1997)}...`\n\t\t\t: JSON.stringify(item, null, 2),\n\t);\n});\n\nclient.login();\n"]}